{% extends "base.html" %}

{% block javascript %}
<script>
function deleteRecipient(url){
 if (confirm("Do you really want to delete this recipient ??")) {
   window.location=url;
 } 
}
</script>
{% endblock %}

{% block content %}
<h2> Recipients list </h2>
<table class='list'>
<colgroup> 
    <col class='name' />
    <col class='name' />
    <col class='number' />
    <col class='number' />
    <col class='number' />
</colgroup> 
<tr class='secondRow doNotFilter'>
<th class='name' > Recipient name </th>
<th class='name' > Recipient identity </th>
<th class='number' style='text-align:center;'> Active </th>
<th class='number' > Edit </th>
<th class='number' > Delete </th>
</tr>
{% for recipient in recipients.object_list %}
<tr {% if forloop.last %} class=""{% endif %}>
<td class='name'>{{recipient.full_name}}</td>
<td class='name'>{{recipient.identity}}</td>
<td class='' style='text-align:center;'>{{recipient.active}}</td>
<td class='number'><a style = "text-decoration:none" href = "{% url recipient recipient.id %}" >
<img style="border:0px" src="/static/groupmessaging/edit-icon.jpeg" width="20" height="20" /> </a></td>

<td class='number'><a style = "text-decoration:none" href = "javascript:deleteRecipient('{% url recipients_delete recipient.id %}')" >
<img style="border:0px" src="/static/groupmessaging/delete-icon.png" width="20" height="20" /> </a></td>
</tr>
{% endfor %}

<tr class="">
<td colspan="5"><span>
        {% if recipients.has_previous %}
            <a href="?page={{ recipients.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ recipients.number }} of {{ recipients.paginator.num_pages }}.
        </span>

        {% if recipients.has_next %}
            <a href="?page={{ recipients.next_page_number }}">next</a>
        {% endif %}
    </span> &nbsp;&nbsp; |&nbsp;&nbsp;<span> No. of the recipients = {{ count }}</span> </td>
  
</tr>
</table>
<p> {{ validationMsg }} </p>
{% endblock %}

{% block submenu %}
<ul><li><a href = "{% url recipient_add %}" > Add new recipient</a></li></ul>
{% endblock %}